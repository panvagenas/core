(function(a){a.fn.toggles=function(k,e){var c={options:{activeByDefaultClass:"active-by-default",header:"> div > div > h3",isActive:function(){},onToggle:function(){}},actions:{showAll:false,hideAll:false,toggleAll:false}};if(typeof k==="object"){k=a.extend({},c.options,k)}else{k=c.options}if(typeof e==="object"){e=a.extend({},c.actions,e)}else{e=c.actions}var d=function(){var m=a(this);if(!m.data("toggles-setup")){return}var l=m.data("toggle-options");m.find(l.header).removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find("> span.ui-icon").removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s").end().next().show().addClass("ui-accordion-content-active");l.onToggle.apply(this,[h.apply(this)])};var f=function(){var m=a(this);if(!m.data("toggles-setup")){return}var l=m.data("toggle-options");m.find(l.header).removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find("> span.ui-icon").removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e").end().next().hide().removeClass("ui-accordion-content-active");l.onToggle.apply(this,[h.apply(this)])};var i=function(){var m=a(this);if(!m.data("toggles-setup")){return}var l=m.data("toggle-options");if(h.apply(this).inactive.length){d.apply(this)}else{f.apply(this)}};var b=function(){var n=a(this);var l=false;if(!n.data("toggles-setup")){return}var m=n.data("toggle-options");n.find(m.header+" > a").each(function(){if(m.isActive.apply(this)){j.apply(a(this).parent().get(0));l=true}});if(!l){n.find(m.header+"."+m.activeByDefaultClass).each(function(){j.apply(this)})}};var h=function(){var m=a(this);var o=[],n=[];if(!m.data("toggles-setup")){return{active:o,inactive:n}}var l=m.data("toggle-options");m.find(l.header).each(function(){if(a(this).hasClass("ui-state-active")){o.push(this)}else{n.push(this)}});return{active:o,inactive:n}};var j=function(){var l=a(this);l.toggleClass("ui-state-default ui-corner-all ui-state-active ui-corner-top").find("> span.ui-icon").toggleClass("ui-icon-triangle-1-e ui-icon-triangle-1-s").end().next().toggle().toggleClass("ui-accordion-content-active")};var g=function(){var m=this;var l=a(m);if(!l.data("toggles-setup")){l.data("toggle-options",k).data("toggles-setup",true).addClass("ui-accordion ui-widget ui-helper-reset").find(k.header).addClass("ui-accordion-header ui-accordion-icons ui-helper-reset ui-state-default ui-corner-all").prepend('<span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-e"></span>').hover(function(){a(this).toggleClass("ui-state-hover")}).click(function(){j.apply(this);k.onToggle.apply(m,[h.apply(m)]);return false}).next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();l.css({visibility:"visible"}),b.apply(this)}};if(e.showAll){return this.each(d)}else{if(e.hideAll){return this.each(f)}else{if(e.toggleAll){return this.each(i)}}}return this.each(g)}})(jQuery);